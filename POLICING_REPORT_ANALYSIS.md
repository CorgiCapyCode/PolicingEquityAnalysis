# 11-00091_Field-Interviews_2011-2016.csv

## 2.1 Data Exploration

### General Information
Location: Bosten    \
FIO: Field Interrogation and Observation (see [BPD](https://data.boston.gov/dataset/boston-police-department-fio)) \
Column descriptions can be found at [Data Boston](https://data.boston.gov/dataset/boston-police-department-fio/resource/1e5f1bc5-a0b4-4dce-ae1c-7c01ab3364f6?inner_span=True) \
The [file](/data_exploration/fiofielddescriptions.xlsx) contains the subtitle and the description.   \
The description incl. the title are listed in belows table:

| Title                                         | Subtitle              | Description                                                                                               |
| ----------------------------------------------| ----------------------| ----------------------------------------------------------------------------------------------------------|
| INCIDENT_UNIQUE_IDENTIFIER                    | SEQ_NUM               | Unique ID generated by database                                                                           |
| INCIDENT_UNIQUE_IDENTIFIER.1                  | FIO_ID                | Unique identifier for the FIO                                                                             |
| SUBJECT_GENDER                                | SEX                   | Sex of the person FIO'd                                                                                   |
| LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION  | LOCATION              | Street address where the stop occurred                                                                    |
| LOCATION_DISTRICT                             | DIST                  | District  in which the stop took place                                                                    |
| LOCATION_DISTRICT.1                           | DIST_ID               | Unique ID for the district used in the DIST field                                                         |
| INCIDENT_DATE                                 | FIO_DATE              | Date on which the stop occurred                                                                           |
| INCIDENT_TIME                                 | FIO_TIME              | Time at which the stop occurrend                                                                          |
| SUBJECT_DETAILS                               | PRIORS                | Does the perion being stopped have a prior record                                                         |
| SUBJECT_RACE                                  | DESCRIPTION           | **Identical to the RACE_DESC field**                                                                      |
| SUBJECT_DETAILS.1                             | CLOTHING              | Clothing worn by the person being stopped                                                                 |
| SUBJECT_DETAILS.2                             | COMPLEXION            | Complextion of the person being stopped                                                                   |
| UNKNOWN_FIELD_TYPE                            | FIOFS_TYPE            | Flag indicating what actions where taken during the FIO:  I=Interogated, O=Observed, F=Frisked, S=Search  |
| UNKNOWN_FIELD_TYPE                            | TERRORISM             | Terrorism related stop (Yes/No)                                                                           |
| SEARCH_CONDUCTED                              | SEARCH                | Flag indicating what was searched: V=Vehicle, P=Person                                                    |
| SEARCH_REASON                                 | BASIS                 | Basis for the stop:  Probable Cause, Reasonable Suspicion, or Content Search                              |
| INCIDENT_REASON                               | STOP_REASONS          | Reasons for original stop                                                                                 |
| INCIDENT_REASON.1                             | FIOFS_REASONS         | Reasons for Interogation, Observation, Frisk or Search                                                    |
| DISPOSITION                                   | OUTCOME               | Outcome:  S=Seizure, F=FIO, O=Other                                                                       |
| VEHICLE_MAKE                                  | VEH_MAKE              | Vehicle make                                                                                              |
| VEHICLE_YEAR                                  | VEH_YEAR_NUM          | Vehicle year                                                                                              |
| VEHICLE_COLOR                                 | VEH_COLOR             | Vehicle color                                                                                             |
| VEHICLE_MODEL                                 | VEH_MODEL             | Vehicle model                                                                                             |
| VEHICLE_DETAILS                               | VEH_OCCUPANT          | Vehicle passenger or driver                                                                               |
| VEHICLE_DETAILS.1                             | VEH_STATE             | Vehicle registration state                                                                                |
| OFFICER_SUPERVISOR                            | SUPERVISOR_ID         | Employee ID of the officer's supervisor                                                                   |
| OFFICER_ID                                    | OFFICER_ID            | Employee ID of the officer                                                                                |
| OFFICER_ASSIGNMENT                            | OFF_DIST_ID           | ID of the officer's district                                                                              |
| OFFICER_ASSIGNMENT.1                          | OFF_DIST              | Officer's district                                                                                        |
| OFFICER_ETHNICITY                             | ETHNICITY             | Ethnicity of the person stopped                                                                           |
| OFFICER_RACE                                  | RACE_DESC             | Description of the race of the person stopped                                                             |
| OFFICER_AGE                                   | AGE_AT_FIO_CORRECTED  | **Field added by the BRIC to store the age of the person at the time of the stop, based on the Date of birth given (not provided in data) and the corrected FIO_DATE** |
| LOCATION_STREET_NUMBER                        | STREET_ID             | Unique ID for the street used in the location field                                                       |
| LOCATION_CITY                                 | CITY                  | City (neighborhood) in which the stop occurred                                                            |

In comparison to the original source from the BPD following features / columns are missing:
- ENTEREDBY: id
- SUPERVISOR: name
- OFFICER: name
- SUP_ENTRYDATE: date & time
- LAST_UPDATEBY: id
- LAST_UPDATETIME: date & time
- FIRST_INSERTTIME: date & time
- ACTIVE_ID: always 1
- RACE_ID: id
- FIO_DATE_CORRECTED: date & time

According to the description the columns ('SUBJECT_RACE', 'DESCRIPTION') and ('OFFICER_RACE', 'RACE_DESC') are the same and both describe the race of subject, not the officer. \
According to the description the column ('OFFICER_AGE', 'AGE_AT_FIO_CORRECTED') contains the subject's age, not the age of the officer.


### Dataset Information
Numerical feature: quantitative feature
Ordinal feature: feature with a meaningful order
Nominal feature: feature without any order

RangeIndex: 152230 entries, 0 to 152229     \
Data columns (total 34 columns):            \

| #   | Feature                                                    | Non-Null Count | Dtype   | Feature category |
|-----|------------------------------------------------------------|----------------|---------|------------------|
| 0   | (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)                      | 149809         | int64   | nominal          |
| 1   | (INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)                     | 149809         | int64   | nominal          |
| 2   | (SUBJECT_GENDER, SEX)                                      | 149809         | object  | nominal          |
| 3   | (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)   | 149807         | object  | nominal          |
| 4   | (LOCATION_DISTRICT, DIST)                                  | 149809         | object  | nominal          |
| 5   | (LOCATION_DISTRICT.1, DIST_ID)                             | 149809         | int64   | nominal          |
| 6   | (INCIDENT_DATE, FIO_DATE)                                  | 149809         | object  | ordinal          |
| 7   | (INCIDENT_TIME, FIO_TIME)                                  | 152230         | object  | ordinal          |
| 8   | (SUBJECT_DETAILS, PRIORS)                                  | 129251         | object  | nominal          |
| 9   | (SUBJECT_RACE, DESCRIPTION)                                | 149809         | object  | nominal          |
| 10  | (SUBJECT_DETAILS.1, CLOTHING)                              | 136603         | object  | nominal          |
| 11  | (SUBJECT_DETAILS.2, COMPLEXION)                            | 149809         | object  | nominal          |
| 12  | (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)                           | 149809         | object  | nominal          |
| 13  | (UNKNOWN_FIELD_TYPE, TERRORISM)                            | 149809         | object  | nominal          |
| 14  | (SEARCH_CONDUCTED, SEARCH)                                 | 20344          | object  | nominal          |
| 15  | (SEARCH_REASON, BASIS)                                     | 34976          | object  | nominal          |
| 16  | (INCIDENT_REASON, STOP_REASONS)                            | 103566         | object  | nominal          |
| 17  | (INCIDENT_REASON.1, FIOFS_REASONS)                         | 149809         | object  | nominal          |
| 18  | (DISPOSITION, OUTCOME)                                     | 141042         | object  | nominal          |
| 19  | (VEHICLE_MAKE, VEH_MAKE)                                   | 139573         | object  | nominal          |
| 20  | (VEHICLE_YEAR, VEH_YEAR_NUM)                               | 149628         | float64 | numerical        |
| 21  | (VEHICLE_COLOR, VEH_COLOR)                                 | 139188         | object  | nominal          |
| 22  | (VEHICLE_MODEL, VEH_MODEL)                                 | 38354          | object  | nominal          |
| 23  | (VEHICLE_DETAILS, VEH_OCCUPANT)                            | 39360          | object  | nominal          |
| 24  | (VEHICLE_DETAILS.1, VEH_STATE)                             | 149809         | object  | nominal          |
| 25  | (OFFICER_SUPERVISOR, SUPERVISOR_ID)                        | 133702         | float64 | nominal          |
| 26  | (OFFICER_ID, OFFICER_ID)                                   | 149809         | int64   | nominal          |
| 27  | (OFFICER_ASSIGNMENT, OFF_DIST_ID)                          | 149809         | int64   | nominal          |
| 28  | (OFFICER_ASSIGNMENT.1, OFF_DIST)                           | 149809         | object  | nominal          |
| 29  | (OFFICER_ETHNICITY, ETHNICITY)                             | 23772          | object  | nominal          |
| 30  | (OFFICER_RACE, RACE_DESC)                                  | 152230         | object  | nominal          |
| 31  | (OFFICER_AGE, AGE_AT_FIO_CORRECTED)                        | 149809         | int64   | numerical        |
| 32  | (LOCATION_STREET_NUMBER, STREET_ID)                        | 149809         | int64   | nominal          |
| 33  | (LOCATION_CITY, CITY)                                      | 149809         | object  | nominal          |

dtypes: float64(2), int64(7), object(25) \
memory usage: 39.5+ MB


### Pre-Filtering of data points and features

Identical feature pairs:
('INCIDENT_DATE', 'FIO_DATE') & ('INCIDENT_TIME', 'FIO_TIME')    \
('SUBJECT_RACE', 'DESCRIPTION') &  ('OFFICER_RACE', 'RACE_DESC')

The second feature of each pair (FIO_TIME and RACE_DESC) will be removed from the dataset.

Removing duplicated data points:
Data points are checked for duplicants, ignoring the unique identifier features, since it can be assumed that they are auto-generated by the system.
2,421 data points are duplicants. All duplicants where removed from the dataset.

Remaining data points: 149,809.

## 2.2 Data Cleaning

List of unique values incl. common placeholders for n/a values. \
In () values are not for sure placeholders. \

| #   | Feature                                                    | Non-Null Count | Unique_Values  | n/a placeholder  | Needs processing          | Suspected correlation |
|-----|------------------------------------------------------------|----------------|----------------|------------------|---------------------------|-----------------------|
| 0   | (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)                      | 149809         | 149809         |                  | no                        | #1                    |
| 1   | (INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)                     | 149809         | 149809         |                  | no                        | #0                    |
| 2   | (SUBJECT_GENDER, SEX)                                      | 149809         | 3              | (UNKOWN)         | RP                        |                       |
| 3   | (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)   | 149807         | 38360          | (UNKNOWN, OTHER) | STR. NO & INTERSEC        | #30                   | 
| 4   | (LOCATION_DISTRICT, DIST)                                  | 149809         | 24             |                  | no                        | #5 / #26 & #27        |
| 5   | (LOCATION_DISTRICT.1, DIST_ID)                             | 149809         | 24             |                  | no                        | #4 / #26 & #27        |
| 6   | (INCIDENT_DATE, FIO_DATE)                                  | 149809         | 2140           | Unplaus. dates   | RNP, remove hours         |                       |
| 7   | (SUBJECT_DETAILS, PRIORS)                                  | 129251         | 3              | (UNKNOWN)        | no                        |                       |
| 8   | (SUBJECT_RACE, DESCRIPTION)                                | 149809         | 8              | NO DATA ENTERED  | RP                        |                       |
| 9   | (SUBJECT_DETAILS.1, CLOTHING)                              | 136603         | 102127         | (UNKNOWN)        | Naming                    |                       |
| 10  | (SUBJECT_DETAILS.2, COMPLEXION)                            | 149809         | 10             | NO DATA ENTERED  | RP                        |                       |
| 11  | (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)                           | 149809         | 26             |                  | separate in options       | #17                   |
| 12  | (UNKNOWN_FIELD_TYPE, TERRORISM)                            | 149809         | 2              |                  | no                        |                       |
| 13  | (SEARCH_CONDUCTED, SEARCH)                                 | 20344          | 3              |                  | no                        |                       |
| 14  | (SEARCH_REASON, BASIS)                                     | 34976          | 3              |                  | no                        |                       |
| 15  | (INCIDENT_REASON, STOP_REASONS)                            | 103566         | 6              |                  | no                        |                       |
| 16  | (INCIDENT_REASON.1, FIOFS_REASONS)                         | 149809         | 222            |                  | separate                  |                       |
| 17  | (DISPOSITION, OUTCOME)                                     | 141042         | 7              |                  | separate                  | #11                   |
| 18  | (VEHICLE_MAKE, VEH_MAKE)                                   | 139573         | 47             | (NO DATA ENTERED)| (RP)                      |                       |
| 19  | (VEHICLE_YEAR, VEH_YEAR_NUM)                               | 149628         | 51             | 0, Unplaus. dates| (RP)                      |                       |
| 20  | (VEHICLE_COLOR, VEH_COLOR)                                 | 139188         | 16             | (NO DATA ENTERED)| (RP)                      |                       |
| 21  | (VEHICLE_MODEL, VEH_MODEL)                                 | 38354          | 2006           |                  | Naming                    |                       |
| 22  | (VEHICLE_DETAILS, VEH_OCCUPANT)                            | 39360          | 2              |                  |                           |                       |
| 23  | (VEHICLE_DETAILS.1, VEH_STATE)                             | 149809         | 48             | (NO DATA ENTERED)|                           |                       |
| 24  | (OFFICER_SUPERVISOR, SUPERVISOR_ID)                        | 133702         | 219            | 1                | RP                        |                       |
| 25  | (OFFICER_ID, OFFICER_ID)                                   | 149809         | 1793           | (1)              |                           |                       |
| 26  | (OFFICER_ASSIGNMENT, OFF_DIST_ID)                          | 149809         | 26             |                  |                           | #27 / #4 & #5         |
| 27  | (OFFICER_ASSIGNMENT.1, OFF_DIST)                           | 149809         | 26             |                  |                           | #26 / #4 & #5         |
| 28  | (OFFICER_ETHNICITY, ETHNICITY)                             | 23772          | 1101           | non              | RP, Naming                |                       | 
| 29  | (OFFICER_AGE, AGE_AT_FIO_CORRECTED)                        | 149809         | 119            | Unplaus. dates   | RNP                       |                       |
| 30  | (LOCATION_STREET_NUMBER, STREET_ID)                        | 149809         | 3155           |                  |                           | #3                    |
| 31  | (LOCATION_CITY, CITY)                                      | 149809         | 23             | NO DATA ENTERED  | RP                        |                       |

RNP: Remove not plausible       \
RP: Replace Placeholder         \

### Features that are not cleaned:
(INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)   \
(INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)  \
(LOCATION_DISTRICT, DIST)               \
(LOCATION_DISTRICT.1, DIST_ID)          \
(SUBJECT_DETAILS, PRIORS)               \
(UNKNOWN_FIELD_TYPE, FIOFS_TYPE)        \
(UNKNOWN_FIELD_TYPE, TERRORISM)         \
(SEARCH_CONDUCTED, SEARCH)              \
(SEARCH_REASON, BASIS)                  \
(DISPOSITION, OUTCOME)                  \
(OFFICER_ASSIGNMENT, OFF_DIST_ID)       \
(OFFICER_ASSIGNMENT.1, OFF_DIST)        \
(LOCATION_STREET_NUMBER, STREET_ID)     \

### Processed features and doings:
- (SUBJECT_GENDER, SEX)
    - Replace UNKNWON with NA-value
    - The sex of a subject should be known. It can be assumed that the entry is missing.
- (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)
    - Remove street numbers from intersections
    - Some intersections have street numbers included, while others not. Since the intersection already contains an exact location, the numbers will be removed.
    - Sort intersections alphabetically
    - Some intersections are written as STREET_A at STREET_B or STREET_B at STREET_A. Since this is the same location, the intersection streets will be sorted alphabetically.
- (INCIDENT_DATE, FIO_DATE)
    - Remove time
    - All entries have a time stamp of 00:00. So this information will be removed to reduce the complexity.
    - Clear unplausible dates.
    - The report states the data from 2011 to 2015. All other dates will be replaced with pd.NA (and later imputed)
- (SUBJECT_RACE, DESCRIPTION)
    - Replace NO DATA ENTERED with NA-value
    - Removed all ()
    - The item "UNKNWON" was kept, since it is possible that some subjects could not be categorized.
- (SUBJECT_DETAILS.1, CLOTHING)
    - Transform all to upper cases
    - Adjust color names (BLK = BLACK, WHT = WHITE, GRY = GREY, BLU = BLUE, GRN = GREEN, BRN = BROWN, DRK = DARK, WHTE = WHITE)
    - Adjust clothing names (JCK = JKT = JACKET, SHT = SHIRT, SWTSHT = SWEATSHIRT, JNS = JEANS, HOODY = HOODIE)
    - Adjust naming for T-Shirt (T SHIRT = T-SHIRT, TSHIRT = T-SHIRT)
    - Remove "."
    - Replace "/" with ", "
    - The column remains difficult to evalute. Specific characteristics can be extracted, such as in general "BLACK" clothes. Refining the feature more or using it as it is right now, does not make sense.
- (SUBJECT_DETAILS.2, COMPLEXION)
    - Remove NO DATA ENTERED
- (OFFICER_SUPERVISOR, SUPERVISOR_ID) & (OFFICER_ID, OFFICER_ID)
    - Remove all "1"
    - Since all other IDs are much larger numbers, it can be assumed that the 1 and 2 stand for "UNKNOWN"/"MISSING DATA" etc.
- (OFFICER_AGE, AGE_AT_FIO_CORRECTED)
    - The age range lies in between -1 and 243. A threshold will be set between 10 and 80.
- (LOCATION_CITY, CITY)
    - Remove NO DATA ENTERED values
- (OFFICER_ETHNICITY, ETHNICITY)
    - Data is partwise not interpretable.
- (INCIDENT_REASON.1, FIOFS_REASONS)
    - Replace "INVESTIGATE" with "INVESTIGATION"
    - Only take first category of reason (before ,)
    - Grouping different categories
- (INCIDENT_REASON, STOP_REASONS)
    - Replaced OTHER (SPECIFY) with OTHER

### Vehicle related features
- The state is the only feature without missing entries (empty), but includes 99.456 NO DATA ENTERED and 10673 OTHER values.
- Some other vehicle related features show entries (e.g. "make" with 717 entries)
- The same applies for the other features, although occupant and model have no NO DATA ENTERED entries, but much more missing entries.
- As assumption:
    - Data points where all vehicle related features miss data (NO DATA ENTERED, 0, ""), including SEARCH not containing V or VP, no vehicle was involved. These fields will be filled with "NO VEHICLE INVOLVED".
    - Data points where at least one vehicle feature, will be counted as vehicle involved. Here the other missing features will be imputed later.
    - This assumption relates in 103273 entries where no vehicle was involved.
- VEH_MODEL receives further adjustments to the values.
    - Writting all in upper case and removing "." etc. reduced the unique values to around 1500.
    - The remaining differences are often based on a single entry (in the original unique entry list 90% of the values have less than 10 entries).
    - A further processing is not conducted for this project.

### Dropping data points
For dropping data points a threshold of 30% is set. All data points having less than 30% non-NaN values will be dropped.
This applies to 0 data points. 

New unique feature list:

| Feature                                       | Unique Value  | Delta |
|-----------------------------------------------|---------------|-------|
| INCIDENT_UNIQUE_IDENTIFIER                    | 149809        | 0     |
| INCIDENT_UNIQUE_IDENTIFIER.1                  | 149809        | 0     |
| SUBJECT_GENDER                                | 2             | -1    |
| LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION  | 33220         | -5140 |
| LOCATION_DISTRICT                             | 24            | 0     |
| LOCATION_DISTRICT.1                           | 24            | 0     |
| INCIDENT_DATE                                 | 1668          | -472  |
| SUBJECT_DETAILS                               | 3             | 0     |
| SUBJECT_RACE                                  | 7             | -1    |
| SUBJECT_DETAILS.1                             | 86107         | -16020|
| SUBJECT_DETAILS.2                             | 9             | -1    |
| UNKNOWN_FIELD_TYPE                            | 26            | 0     |
| UNKNOWN_FIELD_TYPE                            | 2             | 0     |
| SEARCH_CONDUCTED                              | 3             | 0     |
| SEARCH_REASON                                 | 3             | 0     |
| INCIDENT_REASON                               | 6             | 0     |
| INCIDENT_REASON.1                             | 115           | -107  |
| DISPOSITION                                   | 7             | 0     |
| VEHICLE_MAKE                                  | 47            | 0     |
| VEHICLE_YEAR                                  | 48            | -3    |
| VEHICLE_COLOR                                 | 16            | 0     |
| VEHICLE_MODEL                                 | 1526          | -480  |
| VEHICLE_DETAILS                               | 3             | +1    |
| VEHICLE_DETAILS.1                             | 47            | -1    |
| OFFICER_SUPERVISOR                            | 218           | -1    |
| OFFICER_ID                                    | 1791          | -2    |
| OFFICER_ASSIGNMENT                            | 26            | 0     |
| OFFICER_ASSIGNMENT.1                          | 26            | 0     |
| OFFICER_ETHNICITY                             | 1101          | 0     |
| OFFICER_AGE                                   | 71            | -48   |
| LOCATION_STREET_NUMBER                        | 3155          | 0     |
| LOCATION_CITY                                 | 22            | -1    |
| Sum of unique values*                         | 126536        |       |

*without unique identifiers and numerical and ordinal features

## 2.3 Feature Selection

Before the imputation the following features are dropped:

**(INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID):**
Related features: (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM) \
Reason: Both features are unique identifiers. The features can only be used to identify a single data point, but not for any clustering. \
The feature will be dropped, since it does not add additional value to have both features. The first identifier is kept to the dataframe to give the oportunity to link any data point with its original value.

**(LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION):**
Related features: (LOCATION_STREET_NUMBER, STREET_ID) \
Reason: After the cleanong process the feature still contains 33,220 unique values, while related feature only has 3,155. The feature holds more specific information about the location than the related one does. The decision on which to drop, is based on the trade-off between reducing the complexity and the loss of information. \
In this case, the decision favors reducing compelxity by removing the feature and not the related one.

**(VEHICLE_MODEL, VEH_MODEL):**
Related feature: - \
Reason: After data cleaning the feature still contains inconsistencies, such as variations of writing. Furthermore, it contains different depth of information. \
Some entries only mention the number of doors (e.g. 4 doors), while other describe the vehicle type more detailed (e.g. Sedan). \
The effort to clean this feature to an extend that it can be used, is much higher than the possible value that it can bring. Thus, the feature will be dropped.

**(LOCATION_DISTRICT, DIST), (LOCATION_DISTRICT.1, DIST_ID), (OFFICER_ASSIGNMENT.1, OFF_DIST):**
Related feature: (OFFICER_ASSIGNMENT, OFF_DIST_ID)
Reason: Due to the feature description it is suspected that these features contain similar information. A pairwise Chi-Square test is applied to prove this. \
The Chi-Square test is applied in three variations: Using the standard one from the Scipy-Library, using the implementation from Sklearn with label encoding and one hot encoding in advance.
These three methods lead to slightly different results. To proof the suspicion, the maximum value of the three results is taken and checked: For all tests the max. value is below 0.01, indicating that the features are indeed similar. The three features are dropped, while the related one is kept as the representation of them.

**(OFFICER_ETHNICITY, ETHNICITY):**
Releated feature: - \
Reason: The data remains inconsistent and many abbriviations are not interpretable.

**(UNKNOWN_FIELD_TYPE, TERRORISM):**
Related feature: - \
Reason: The "yes"-rate of the feature is very low. The information gain is thus low.

**(SUBJECT_DETAILS.1, CLOTHING)**
Related feature: - \
Reason: Inconsistent data as for VEH_MODEL. \


After dropping these features, 23 features remain in the dataset:

| Feature                                     | Count |
|---------------------------------------------|-------|
| ('INCIDENT_UNIQUE_IDENTIFIER', 'SEQ_NUM')   | 149809|
| ('SUBJECT_GENDER', 'SEX')                   | 2     |
| ('INCIDENT_DATE', 'FIO_DATE')               | 1668  |
| ('SUBJECT_DETAILS', 'PRIORS')               | 3     |
| ('SUBJECT_RACE', 'DESCRIPTION')             | 7     |
| ('SUBJECT_DETAILS.2', 'COMPLEXION')         | 9     |
| ('UNKNOWN_FIELD_TYPE', 'FIOFS_TYPE')        | 26    |
| ('SEARCH_CONDUCTED', 'SEARCH')              | 3     |
| ('SEARCH_REASON', 'BASIS')                  | 3     |
| ('INCIDENT_REASON', 'STOP_REASONS')         | 6     |
| ('INCIDENT_REASON.1', 'FIOFS_REASONS')      | 115   |
| ('DISPOSITION', 'OUTCOME')                  | 7     |
| ('VEHICLE_MAKE', 'VEH_MAKE')                | 47    |
| ('VEHICLE_YEAR', 'VEH_YEAR_NUM')            | 48    |
| ('VEHICLE_COLOR', 'VEH_COLOR')              | 16    |
| ('VEHICLE_DETAILS', 'VEH_OCCUPANT')         | 3     |
| ('VEHICLE_DETAILS.1', 'VEH_STATE')          | 47    |
| ('OFFICER_SUPERVISOR', 'SUPERVISOR_ID')     | 218   |
| ('OFFICER_ID', 'OFFICER_ID')                | 1791  |
| ('OFFICER_ASSIGNMENT', 'OFF_DIST_ID')       | 26    |
| ('OFFICER_AGE', 'AGE_AT_FIO_CORRECTED')     | 71    |
| ('LOCATION_STREET_NUMBER', 'STREET_ID')     | 3155  |
| ('LOCATION_CITY', 'CITY')                   | 22    |
| Sum of unique values*                       | 5506  |

*without unique identifier and numerical and ordinal features

## 2.4 Imputation

Currently only five features have no missing data.
The mode imputation would change the distributions for some features.
The data imputation uses four different methods:

SPI - Simple Probabilistic Imputer:
- Imputing based on the probability distribution of unique values of one feature.
- Maintains the distribution of feature values.
- Example: Using mode imputation for (LOCATION_CITY, CITY) would add 68353 times the most common value (Drochester), which increases the representation from around 23.5% to 58.4% in the dataset.

CPI - Complex Probabilistic Imputer:
- Same as SPI, but does not consider all unique values for imputation.
- Used for the vehicle-related features to not impute more of "NO VEHICLE INVOLVED" values.

MBI: Multivariate Bayesian Imputer:
- Imputes values based on the probablity distribution of a value, while taking the value of another feature as condition.
- Needs SPI afterwards.

DI: Dependent Imputer:
- Pre-imputer to ensure data correctness.
- It is used for (SEARCH_CONDUCTED, SEARCH), where the values V or VP cannot occur when there is no vehicle involved.
- Needs SPI afterwards.

Belows table shows which method is applied to which feature.

| Feature                                 | Non-Null Count | Dtype            | Imputing method | Description                                   |
|-----------------------------------------|----------------|------------------|-----------------|-----------------------------------------------|
| (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)   | 149809         | int64            | No missing data |                                               |
| (SUBJECT_GENDER, SEX)                   | 149578         | object           | SPI             |                                               |
| (INCIDENT_DATE, FIO_DATE)               | 148392         | datetime64[ns]   | SPI             |                                               |
| (SUBJECT_DETAILS, PRIORS)               | 129251         | object           | SPI             |                                               |
| (SUBJECT_RACE, DESCRIPTION)             | 143852         | object           | MBI -> SPI      | COMPLEXION                                    |
| (SUBJECT_DETAILS.2, COMPLEXION)         | 127299         | object           | MBI -> SPI      | DESCRIPTION                                   |
| (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)        | 149809         | object           | No missing data |                                               |
| (SEARCH_CONDUCTED, SEARCH)              | 20344          | object           | DI, SPI         |                                               |
| (SEARCH_REASON, BASIS)                  | 34976          | object           | SPI             |                                               |
| (INCIDENT_REASON, STOP_REASONS)         | 103566         | object           | SPI             |                                               |
| (INCIDENT_REASON.1, FIOFS_REASONS)      | 149809         | object           | No missing data |                                               |
| (DISPOSITION, OUTCOME)                  | 141042         | object           | SPI             |                                               |
| (VEHICLE_MAKE, VEH_MAKE)                | 144591         | object           | CPI             | NO VEHICLE INVOLVED will not be considered.   |
| (VEHICLE_YEAR, VEH_YEAR_NUM)            | 137858         | object           | CPI             | NO VEHICLE INVOLVED will not be considered.   |
| (VEHICLE_COLOR, VEH_COLOR)              | 143402         | object           | CPI             | NO VEHICLE INVOLVED will not be considered.   |
| (VEHICLE_DETAILS, VEH_OCCUPANT)         | 143030         | object           | CPI             | NO VEHICLE INVOLVED will not be considered.   |
| (VEHICLE_DETAILS.1, VEH_STATE)          | 145090         | object           | CPI             | NO VEHICLE INVOLVED will not be considered.   |
| (OFFICER_SUPERVISOR, SUPERVISOR_ID)     | 133170         | object           | MBI -> SPI      | OFFICER ID                                    |
| (OFFICER_ID, OFFICER_ID)                | 149124         | object           | MBI -> SPI      | SUPERVISOR ID                                 |
| (OFFICER_ASSIGNMENT, OFF_DIST_ID)       | 149809         | int64            | No missing data |                                               |
| (OFFICER_AGE, AGE_AT_FIO_CORRECTED)     | 145833         | int64            | SPI             |                                               |
| (LOCATION_STREET_NUMBER, STREET_ID)     | 149809         | int64            | No missing data |                                               |
| (LOCATION_CITY, CITY)                   | 81456          | object           | MBI -> SPI      | STREET_ID                                     |


## 2.5	Feature Generation and Value Grouping

The current data contains more than 5,500 unique values, mainly categorical data. Using a clustering algorithm that uses distance metrics would require one hot encoding. This leads to a very complex dataframe.
The following table shows the actions taken to reduce the complexity:


| Column Name                               | Number of Unique Values | Action              |
|-------------------------------------------|-------------------------|---------------------|
| ('INCIDENT_UNIQUE_IDENTIFIER', 'SEQ_NUM') | 149809                  | n/a                 |
| ('SUBJECT_GENDER', 'SEX')                 | 2                       | Label Encoding      |
| ('INCIDENT_DATE', 'FIO_DATE')             |                         | Split data and time |              
| ('SUBJECT_DETAILS', 'PRIORS')             | 3                       | n/a                 |
| ('SUBJECT_RACE', 'DESCRIPTION')           | 7                       | n/a                 |
| ('SUBJECT_DETAILS.2', 'COMPLEXION')       | 9                       | <25 to OTHER        |
| ('UNKNOWN_FIELD_TYPE', 'FIOFS_TYPE')      | 26                      | Create Features     |
| ('SEARCH_CONDUCTED', 'SEARCH')            | 3                       | Create Features     |
| ('SEARCH_REASON', 'BASIS')                | 3                       | n/a                 |
| ('INCIDENT_REASON', 'STOP_REASONS')       | 6                       | <25 to OTHER        |
| ('INCIDENT_REASON.1', 'FIOFS_REASONS')    | 115                     | <25 to OTHER        |
| ('DISPOSITION', 'OUTCOME')                | 7                       | Create Features     |
| ('VEHICLE_MAKE', 'VEH_MAKE')              | 47                      | <25 to OTHER        |
| ('VEHICLE_YEAR', 'VEH_YEAR_NUM')          | 48                      | <25 to OTHER        |
| ('VEHICLE_COLOR', 'VEH_COLOR')            | 16                      | n/a                 |
| ('VEHICLE_DETAILS', 'VEH_OCCUPANT')       | 3                       | n/a                 |
| ('VEHICLE_DETAILS.1', 'VEH_STATE')        | 47                      | <25 to OTHER        |
| ('OFFICER_SUPERVISOR', 'SUPERVISOR_ID')   | 218                     | <25 to OTHER        |
| ('OFFICER_ID', 'OFFICER_ID')              | 1791                    | <25 to OTHER        |
| ('OFFICER_ASSIGNMENT', 'OFF_DIST_ID')     | 26                      | <25 to OTHE         |
| ('OFFICER_AGE', 'AGE_AT_FIO_CORRECTED')   | 71                      | Scaling             |
| ('LOCATION_STREET_NUMBER', 'STREET_ID')   | 3155                    | <25 to OTHER        |
| ('LOCATION_CITY', 'CITY')                 | 22                      | n/a                 |


Label Encoding: The feature is already of binary nature, and thus label encoded.

< 25 to OTHER: Values occuring less than 25 times, are grouped together to "OTHER" to reduce complexity.

Create Features: The unique values are a mixture of abbirivations in different combiantions. Split these abbriviations to a single feature reduces the complexity by maintaining all information. E.g. ('SEARCH_CONDUCTED', 'SEARCH') contains either V (vehicle) P (person) or VP (Vehicle and Person). One hot encoding would end in three features, V, P and VP. Since VP is only a combiantion of V and P, it is not needed.

Split date and time: Splits ('INCIDENT_DATE', 'FIO_DATE') to year, month, day.

## Base Statistics

- Univariate
    - Analysis of the frequency of each value.
    - Creation of pie chart and histogram (simplified for visualization)
- Multivariate (time intensive process, creates >10000 plots)
    - Grouping of two features
    - Creation of scatter plots
    - Creation of bar charts


## Clustering

Clustering all data from the state above lead to very low cluster quality.
Based on a sample of 50% of the data, the Sillhouette Score for all three applied algorithms (KMeans, DBSCAN and GMM) is maximum 0.06.

Two approaches to receive better cluster quality are conducted:
1. Clustering in Groups
The data can be grouped as seen below:

- Categorical Grouping
    - Subject status
        - (SUBJECT_GENDER, SEX)
        - (SUBJECT_RACE, DESCRIPTION)
        - (SUBJECT_DETAILS.2, COMPLEXION)
        - (SUBJECT_DETAILS, PRIORS)
        - (OFFICER_AGE, AGE_AT_FIO_CORRECTED)
    - Vehicle
        - (VEHICLE_MAKE, VEH_MAKE)
        - (VEHICLE_YEAR, VEH_YEAR_NUM)
        - (VEHICLE_COLOR, VEH_COLOR)
        - (VEHICLE_DETAILS, VEH_OCCUPANT)
        - (VEHICLE_DETAILS.1, VEH_STATE)
    - Location
        - (LOCATION_STREET_NUMBER, STREET_ID)
        - (LOCATION_CITY, CITY)
        - (OFFICER_ASSIGNMENT, OFF_DIST_ID)
    - Officer / Supervisor
        - (OFFICER_SUPERVISOR, SUPERVISOR_ID)
        - (OFFICER_ID, OFFICER_ID)
    - Action
        - (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)
        - (SEARCH_CONDUCTED, SEARCH)
        - (SEARCH_REASON, BASIS)
        - (INCIDENT_REASON, STOP_REASONS)
        - (INCIDENT_REASON.1, FIOFS_REASONS)
        - ('DISPOSITION', 'OUTCOME')
    - Date
        - ('Year', 'Year')
        - ('Month', 'Month')

The clustering will be performed on each group.
The nuclei of each group will then be used as input for the clustering over all data, instead of using the whole dataframe.

2. Reducing the dimensionality further:
Currently around 2,000 one hot encoded features are considered for clustering. This influences the performance of the clustering.
A step to increase performance would be to drop more features, although this comes along with the loss of information.

Both steps will be performed and the results will be compared.


To step 2: \
The features STREET_ID and OFFICER_ID will be dropped. After grouping insignificant values (below 25 occurances), the group of "OTHER" is the strongest one. \
Meaning, that the data is very diverse. Dropping both will remove 1560 unique values.



Results from Step 1:
Using 5% of the data for sample with max. 10 clusters.
------------------------
Subject Cluster Information

{'subject_elbow_value': 4, 'subject_optimal_n': 8, 'subject_sil_score_kmeans': 0.48729538974930203, 'subject_sil_score_gmm': 0.6145651663968986}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 3, 'vehicle_optimal_n': 9, 'vehicle_sil_score_kmeans': 0.7517884506907374, 'vehicle_sil_score_gmm': 0.748684134205044}
Location Cluster Information

{'location_elbow_value': 3, 'location_optimal_n': 9, 'location_sil_score_kmeans': 0.20466252719057035, 'location_sil_score_gmm': 0.33274208556758444}
------------------------
Officer Cluster Information

{'officer_elbow_value': 2, 'officer_optimal_n': 5, 'officer_sil_score_kmeans': 0.008432626813366166, 'officer_sil_score_gmm': 0.05825974220469778}
------------------------
Action Cluster Information

{'action_elbow_value': 6, 'action_optimal_n': 8, 'action_sil_score_kmeans': 0.23485082430181106, 'action_sil_score_gmm': 0.2108178922062599}
------------------------
Date Cluster Information

{'date_elbow_value': 4, 'date_optimal_n': 9, 'date_sil_score_kmeans': 0.4082791003644961, 'date_sil_score_gmm': 0.3477342613389168}


Results from Step 2:
Low values, like for total features.


From here only step 1 will be investigated further:

Optimization Loop 1: Increase the max. clusters to 20, by keeping sample of 5% (around 7500 values).

{'subject_elbow_value': 9, 'subject_optimal_n': 18, 'subject_sil_score_kmeans': 0.6743149325107848, 'subject_sil_score_gmm': 0.811916357395974}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 6, 'vehicle_optimal_n': 14, 'vehicle_sil_score_kmeans': 0.7351589122929069, 'vehicle_sil_score_gmm': 0.7416582888646603}
Location Cluster Information

{'location_elbow_value': 3, 'location_optimal_n': 19, 'location_sil_score_kmeans': 0.20466252719057035, 'location_sil_score_gmm': 0.5166037540752957}
------------------------
Officer Cluster Information

{'officer_elbow_value': 10, 'officer_optimal_n': 5, 'officer_sil_score_kmeans': 0.12970817300877532, 'officer_sil_score_gmm': 0.05825974220469778}
------------------------
Action Cluster Information

{'action_elbow_value': 7, 'action_optimal_n': 16, 'action_sil_score_kmeans': 0.24821050900097913, 'action_sil_score_gmm': 0.28370955053737057}
------------------------
Date Cluster Information

{'date_elbow_value': 5, 'date_optimal_n': 15, 'date_sil_score_kmeans': 0.37448710635340354, 'date_sil_score_gmm': 0.216285715023049}



Optimization Loop 2: Increase the data sample from 5% to 20%:

{'subject_elbow_value': 8, 'subject_optimal_n': 19, 'subject_sil_score_kmeans': 0.6639927546608346, 'subject_sil_score_gmm': 0.8137854580126171}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 6, 'vehicle_optimal_n': 19, 'vehicle_sil_score_kmeans': 0.731215686357624, 'vehicle_sil_score_gmm': 0.7514298104595686}
Location Cluster Information

{'location_elbow_value': 6, 'location_optimal_n': 19, 'location_sil_score_kmeans': 0.30145259702103966, 'location_sil_score_gmm': 0.5215717360757914}
------------------------
Officer Cluster Information

{'officer_elbow_value': 3, 'officer_optimal_n': 3, 'officer_sil_score_kmeans': 0.028046401341184645, 'officer_sil_score_gmm': 0.028046401341184645}
------------------------
Action Cluster Information

{'action_elbow_value': 8, 'action_optimal_n': 17, 'action_sil_score_kmeans': 0.2708746266775471, 'action_sil_score_gmm': 0.27139773594531186}
------------------------
Date Cluster Information

{'date_elbow_value': 5, 'date_optimal_n': 18, 'date_sil_score_kmeans': 0.3824516626486248, 'date_sil_score_gmm': -0.08214558947469201}



Optimization Loop 3: Increase the max. clusters to 50, since some clusters are close to max. (Subject & Location), but with only 10% data sample (reduce computational effort)

Subject Cluster Information

{'subject_elbow_value': 13, 'subject_optimal_n': 34, 'subject_sil_score_kmeans': 0.7696420172601222, 'subject_sil_score_gmm': 0.744976491116243}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 12, 'vehicle_optimal_n': 23, 'vehicle_sil_score_kmeans': 0.7635204586408093, 'vehicle_sil_score_gmm': 0.758258727240427}
Location Cluster Information

{'location_elbow_value': 19, 'location_optimal_n': 49, 'location_sil_score_kmeans': 0.5520436598920627, 'location_sil_score_gmm': 0.7929411900995825}
------------------------
Officer Cluster Information

{'officer_elbow_value': 24, 'officer_optimal_n': 2, 'officer_sil_score_kmeans': 0.22899771536631552, 'officer_sil_score_gmm': 0.013115555119923147}
------------------------
Action Cluster Information

{'action_elbow_value': 16, 'action_optimal_n': 41, 'action_sil_score_kmeans': 0.36579921264478527, 'action_sil_score_gmm': 0.46526916793197426}
------------------------
Date Cluster Information

{'date_elbow_value': 9, 'date_optimal_n': 49, 'date_sil_score_kmeans': 0.36138593211908027, 'date_sil_score_gmm': -0.11678268182600121}


1% data sample with 80 max.

Subject Cluster Information

{'subject_elbow_value': 14, 'subject_optimal_n': 19, 'subject_sil_score_kmeans': 0.777874534636768, 'subject_sil_score_gmm': 0.8160316101141776}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 7, 'vehicle_optimal_n': 6, 'vehicle_sil_score_kmeans': 0.7354643509211813, 'vehicle_sil_score_gmm': 0.7324069324333307}
Location Cluster Information

{'location_elbow_value': 20, 'location_optimal_n': 20, 'location_sil_score_kmeans': 0.5832644669794311, 'location_sil_score_gmm': 0.5714279392377651}
------------------------
Officer Cluster Information

{'officer_elbow_value': 3, 'officer_optimal_n': 2, 'officer_sil_score_kmeans': 0.032043640605048815, 'officer_sil_score_gmm': 0.011669448527196424}
------------------------
Action Cluster Information

{'action_elbow_value': 19, 'action_optimal_n': 14, 'action_sil_score_kmeans': 0.3930204007081232, 'action_sil_score_gmm': 0.27019095757474265}
------------------------
Date Cluster Information

{'date_elbow_value': 11, 'date_optimal_n': 30, 'date_sil_score_kmeans': 0.37161081745644203, 'date_sil_score_gmm': -0.1897256401656206}


Last itertation: 10%, 80
{'subject_elbow_value': 15, 'subject_optimal_n': 34, 'subject_sil_score_kmeans': 0.7901484052294335, 'subject_sil_score_gmm': 0.744976491116243}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 12, 'vehicle_optimal_n': 23, 'vehicle_sil_score_kmeans': 0.7635204586408093, 'vehicle_sil_score_gmm': 0.758258727240427}
Location Cluster Information

{'location_elbow_value': 19, 'location_optimal_n': 68, 'location_sil_score_kmeans': 0.5520436598920627, 'location_sil_score_gmm': 0.8810924946982733}
------------------------
Officer Cluster Information

{'officer_elbow_value': 24, 'officer_optimal_n': 2, 'officer_sil_score_kmeans': 0.22899771536631552, 'officer_sil_score_gmm': 0.013115555119923147}
------------------------
Action Cluster Information

{'action_elbow_value': 16, 'action_optimal_n': 41, 'action_sil_score_kmeans': 0.36579921264478527, 'action_sil_score_gmm': 0.46526916793197426}
------------------------
Date Cluster Information

{'date_elbow_value': 11, 'date_optimal_n': 58, 'date_sil_score_kmeans': 0.347562274067459, 'date_sil_score_gmm': 0.07550005391704444}




25% of data, max. 80 cluster

{'subject_elbow_value': 14, 'subject_optimal_n': 53, 'subject_sil_score_kmeans': 0.776417459023424, 'subject_sil_score_gmm': 0.7096916190121251}
------------------------
Vehicle Cluster Information

{'vehicle_elbow_value': 21, 'vehicle_optimal_n': 58, 'vehicle_sil_score_kmeans': 0.7567258544510215, 'vehicle_sil_score_gmm': 0.7669797685016199}
Location Cluster Information

{'location_elbow_value': 20, 'location_optimal_n': 79, 'location_sil_score_kmeans': 0.5678903549720249, 'location_sil_score_gmm': 0.9113400965917399}
------------------------
Officer Cluster Information

{'officer_elbow_value': 7, 'officer_optimal_n': 12, 'officer_sil_score_kmeans': 0.09963809701366284, 'officer_sil_score_gmm': 0.13190812764785292}
------------------------
Action Cluster Information

{'action_elbow_value': 25, 'action_optimal_n': 49, 'action_sil_score_kmeans': 0.417409035931026, 'action_sil_score_gmm': 0.5065469017321592}
------------------------
Date Cluster Information

{'date_elbow_value': 12, 'date_optimal_n': 66, 'date_sil_score_kmeans': 0.34988874525792507, 'date_sil_score_gmm': 0.1552410652458594}

Open doings:
Find mode value for each cluster and overwrite the actual column value -> create new df.
Delete double entries? - To be discussed -> instead of deleting: get unique columns list -> add a feature that counts it?
Run the clustering on the reduced dataframe
