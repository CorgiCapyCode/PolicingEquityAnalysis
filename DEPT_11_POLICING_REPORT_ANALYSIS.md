# 11-00091_Field-Interviews_2011-2016.csv

Location: Boston

FIO: Field Interrogation and Observation (source: https://data.boston.gov/dataset/boston-police-department-fio)

- Program to make interaction between Boston Police Department (BPD) and subjects transparent.
- BPD provides a description for the FIO columns, in belows table the subtitles. The description can be found: https://data.boston.gov/dataset/boston-police-department-fio/resource/1e5f1bc5-a0b4-4dce-ae1c-7c01ab3364f6?inner_span=True

## Features explaination

| Title | Subtitle | Description |
| ----- | ----- | ----- |
| INCIDENT_UNIQUE_IDENTIFIER | SEQ_NUM | Unique ID generated by database |
| INCIDENT_UNIQUE_IDENTIFIER.1 | FIO_ID | Unique identifier for the FIO |
| SUBJECT_GENDER | SEX | Sex of the person FIO'd |
| LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION | LOCATION | Street address where the stop occurred |
| LOCATION_DISTRICT | DIST | District  in which the stop took place |
| LOCATION_DISTRICT.1 | DIST_ID | Unique ID for the district used in the DIST field |
| INCIDENT_DATE | FIO_DATE | Date on which the stop occurred |
| INCIDENT_TIME | FIO_TIME | Time at which the stop occurrend |
| SUBJECT_DETAILS | PRIORS | Does the perion being stopped have a prior record |
| SUBJECT_RACE | DESCRIPTION | Identical to the RACE_DESC field |
| SUBJECT_DETAILS.1 | CLOTHING | Clothing worn by the person being stopped |
| SUBJECT_DETAILS.2 | COMPLEXION | Complextion of the person being stopped |
| UNKNOWN_FIELD_TYPE | FIOFS_TYPE | Flag indicating what actions where taken during the FIO:  I=Interogated, O=Observed, F=Frisked, S=Search |
| UNKNOWN_FIELD_TYPE | TERRORISM | Terrorism related stop (Yes/No) |
| SEARCH_CONDUCTED | SEARCH | Flag indicating what was searched: V=Vehicle, P=Person |
| SEARCH_REASON | BASIS | Basis for the stop:  Probable Cause, Reasonable Suspicion, or Content Search |
| INCIDENT_REASON | STOP_REASONS | Reasons for original stop |
| INCIDENT_REASON.1 | FIOFS_REASONS | Reasons for Interogation, Observation, Frisk or Search |
| DISPOSITION | OUTCOME | Outcome:  S=Seizure, F=FIO, O=Other |
| VEHICLE_MAKE | VEH_MAKE | Vehicle make |
| VEHICLE_YEAR | VEH_YEAR_NUM | Vehicle year |
| VEHICLE_COLOR | VEH_COLOR | Vehicle color |
| VEHICLE_MODEL | VEH_MODEL | Vehicle model |
| VEHICLE_DETAILS | VEH_OCCUPANT | Vehicle passenger or driver |
| VEHICLE_DETAILS.1 | VEH_STATE | Vehicle registration state |
| OFFICER_SUPERVISOR | SUPERVISOR_ID | Employee ID of the officer's supervisor |
| OFFICER_ID | OFFICER_ID | Employee ID of the officer |
| OFFICER_ASSIGNMENT | OFF_DIST_ID | ID of the officer's district |
| OFFICER_ASSIGNMENT.1 | OFF_DIST | Officer's district |
| OFFICER_ETHNICITY | ETHNICITY | Ethnicity of the person stopped |
| OFFICER_RACE | RACE_DESC | Description of the race of the person stopped |
| OFFICER_AGE | AGE_AT_FIO_CORRECTED | Field added by the BRIC to store the age of the person at the time of the stop, based on the Date of birth given (not provided in data) and the corrected FIO_DATE |
| LOCATION_STREET_NUMBER | STREET_ID | Unique ID for the street used in the location field |
| LOCATION_CITY | CITY | City (neighborhood) in which the stop occurred |

In comparison to the original source from the BPD following features / columns are missing:
- ENTEREDBY: id
- SUPERVISOR: name
- OFFICER: name
- SUP_ENTRYDATE: date & time
- LAST_UPDATEBY: id
- LAST_UPDATETIME: date & time
- FIRST_INSERTTIME: date & time
- ACTIVE_ID: always 1
- RACE_ID: id
- FIO_DATE_CORRECTED: date & time

Source: https://data.boston.gov/dataset/boston-police-department-fio/resource/c696738d-2625-4337-8c50-123c2a85fbad?inner_span=True

## Feature General Information
RangeIndex: 152230 entries, 0 to 152229     \
Data columns (total 34 columns):            \
| #   | Column                                                     | Non-Null Count | Dtype   |
|-----|------------------------------------------------------------|----------------|---------|
| 0   | (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)                      | 152230         | int64   |
| 1   | (INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)                     | 152230         | int64   |
| 2   | (SUBJECT_GENDER, SEX)                                      | 152230         | object  |
| 3   | (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)   | 152228         | object  |
| 4   | (LOCATION_DISTRICT, DIST)                                  | 152230         | object  |
| 5   | (LOCATION_DISTRICT.1, DIST_ID)                             | 152230         | int64   |
| 6   | (INCIDENT_DATE, FIO_DATE)                                  | 152230         | object  |
| 7   | (INCIDENT_TIME, FIO_TIME)                                  | 152230         | object  |
| 8   | (SUBJECT_DETAILS, PRIORS)                                  | 131331         | object  |
| 9   | (SUBJECT_RACE, DESCRIPTION)                                | 152230         | object  |
| 10  | (SUBJECT_DETAILS.1, CLOTHING)                              | 138761         | object  |
| 11  | (SUBJECT_DETAILS.2, COMPLEXION)                            | 152230         | object  |
| 12  | (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)                           | 152230         | object  |
| 13  | (UNKNOWN_FIELD_TYPE, TERRORISM)                            | 152230         | object  |
| 14  | (SEARCH_CONDUCTED, SEARCH)                                 | 20640          | object  |
| 15  | (SEARCH_REASON, BASIS)                                     | 35544          | object  |
| 16  | (INCIDENT_REASON, STOP_REASONS)                            | 105322         | object  |
| 17  | (INCIDENT_REASON.1, FIOFS_REASONS)                         | 152230         | object  |
| 18  | (DISPOSITION, OUTCOME)                                     | 143316         | object  |
| 19  | (VEHICLE_MAKE, VEH_MAKE)                                   | 141776         | object  |
| 20  | (VEHICLE_YEAR, VEH_YEAR_NUM)                               | 152049         | float64 |
| 21  | (VEHICLE_COLOR, VEH_COLOR)                                 | 141385         | object  |
| 22  | (VEHICLE_MODEL, VEH_MODEL)                                 | 38913          | object  |
| 23  | (VEHICLE_DETAILS, VEH_OCCUPANT)                            | 39987          | object  |
| 24  | (VEHICLE_DETAILS.1, VEH_STATE)                             | 152230         | object  |
| 25  | (OFFICER_SUPERVISOR, SUPERVISOR_ID)                        | 135776         | float64 |
| 26  | (OFFICER_ID, OFFICER_ID)                                   | 152230         | int64   |
| 27  | (OFFICER_ASSIGNMENT, OFF_DIST_ID)                          | 152230         | int64   |
| 28  | (OFFICER_ASSIGNMENT.1, OFF_DIST)                           | 152230         | object  |
| 29  | (OFFICER_ETHNICITY, ETHNICITY)                             | 24152          | object  |
| 30  | (OFFICER_RACE, RACE_DESC)                                  | 152230         | object  |
| 31  | (OFFICER_AGE, AGE_AT_FIO_CORRECTED)                        | 152230         | int64   |
| 32  | (LOCATION_STREET_NUMBER, STREET_ID)                        | 152230         | int64   |
| 33  | (LOCATION_CITY, CITY)                                      | 152230         | object  |

dtypes: float64(2), int64(7), object(25) \
memory usage: 39.5+ MB

## Data pre-filtering

### Redundant Features

Based on the description it was suspected that some features may contain redundant data. The description for SUBJECT_RACE (DESCRIPTION) even stated that it is identical with the feature OOFICER_RACE (RACE_DESC).

The feature comparison results in following feature pairs being identical:

('INCIDENT_DATE', 'FIO_DATE') & ('INCIDENT_TIME', 'FIO_TIME')   \
('SUBJECT_RACE', 'DESCRIPTION') &  ('OFFICER_RACE', 'RACE_DESC')

The second feature of both pairs (FIO_TIME and RACE_DESC) will be deleted.

### Duplicanted Data Points

The data points are checked for duplicants, while ignoring the first two columns, since they are unique identifiers (the first identifier is system generated and thus always different even for the the same case). \
By comparing all remaining 30 features, 2421 duplicants where found and removed from the dataset. \
The remaining number of data points is at this point: 149,809.

### Classification of remaining features

Numerical feature: quantitative feature
Ordinal feature: feature with a meaningful order
Nominal feature: feature without any order

| #   | Column                                                     | Non-Null Count | Dtype   | Feature category |
|-----|------------------------------------------------------------|----------------|---------|------------------|
| 0   | (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)                      | 149809         | int64   | nominal          |
| 1   | (INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)                     | 149809         | int64   | nominal          |
| 2   | (SUBJECT_GENDER, SEX)                                      | 149809         | object  | nominal          |
| 3   | (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)   | 149807         | object  | nominal          |
| 4   | (LOCATION_DISTRICT, DIST)                                  | 149809         | object  | nominal          |
| 5   | (LOCATION_DISTRICT.1, DIST_ID)                             | 149809         | int64   | nominal          |
| 6   | (INCIDENT_DATE, FIO_DATE)                                  | 149809         | object  | ordinal          |
| 7   | (SUBJECT_DETAILS, PRIORS)                                  | 129251         | object  | nominal          |
| 8   | (SUBJECT_RACE, DESCRIPTION)                                | 149809         | object  | nominal          |
| 9   | (SUBJECT_DETAILS.1, CLOTHING)                              | 136603         | object  | nominal          |
| 10  | (SUBJECT_DETAILS.2, COMPLEXION)                            | 149809         | object  | nominal          |
| 11  | (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)                           | 149809         | object  | nominal          |
| 12  | (UNKNOWN_FIELD_TYPE, TERRORISM)                            | 149809         | object  | nominal          |
| 13  | (SEARCH_CONDUCTED, SEARCH)                                 | 20344          | object  | nominal          |
| 14  | (SEARCH_REASON, BASIS)                                     | 34976          | object  | ordinal          |
| 15  | (INCIDENT_REASON, STOP_REASONS)                            | 103566         | object  | nominal          |
| 16  | (INCIDENT_REASON.1, FIOFS_REASONS)                         | 149809         | object  | nominal          |
| 17  | (DISPOSITION, OUTCOME)                                     | 141042         | object  | nominal          |
| 18  | (VEHICLE_MAKE, VEH_MAKE)                                   | 139573         | object  | nominal          |
| 19  | (VEHICLE_YEAR, VEH_YEAR_NUM)                               | 149628         | float64 | numerical        |
| 20  | (VEHICLE_COLOR, VEH_COLOR)                                 | 139188         | object  | nominal          |
| 21  | (VEHICLE_MODEL, VEH_MODEL)                                 | 38354          | object  | nominal          |
| 22  | (VEHICLE_DETAILS, VEH_OCCUPANT)                            | 39360          | object  | nominal          |
| 23  | (VEHICLE_DETAILS.1, VEH_STATE)                             | 149809         | object  | nominal          |
| 24  | (OFFICER_SUPERVISOR, SUPERVISOR_ID)                        | 133702         | float64 | nominal          |
| 25  | (OFFICER_ID, OFFICER_ID)                                   | 149809         | int64   | nominal          |
| 26  | (OFFICER_ASSIGNMENT, OFF_DIST_ID)                          | 149809         | int64   | nominal          |
| 27  | (OFFICER_ASSIGNMENT.1, OFF_DIST)                           | 149809         | object  | nominal          |
| 28  | (OFFICER_ETHNICITY, ETHNICITY)                             | 23772          | object  | nominal          |
| 29  | (OFFICER_AGE, AGE_AT_FIO_CORRECTED)                        | 149809         | int64   | numerical        |
| 30  | (LOCATION_STREET_NUMBER, STREET_ID)                        | 149809         | int64   | nominal          |
| 31  | (LOCATION_CITY, CITY)                                      | 149809         | object  | nominal          |

## Data Cleaning

### Feature value pre-check

Using the unique values incl. counts per feature results in:

| #   | Column                                                     | Non-Null Count | Unique_Values  | n/a placeholder  | Needs processing          | Suspected correlation |
|-----|------------------------------------------------------------|----------------|----------------|------------------|---------------------------|-----------------------|
| 0   | (INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)                      | 149809         | 149809         |                  | no                        | #1                    |
| 1   | (INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)                     | 149809         | 149809         |                  | no                        | #0                    |
| 2   | (SUBJECT_GENDER, SEX)                                      | 149809         | 3              | (UNKOWN)         | RP                        |                       |
| 3   | (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)   | 149807         | 38360          | (UNKNOWN, OTHER) | STR. NO & INTERSEC        | #30                   | 
| 4   | (LOCATION_DISTRICT, DIST)                                  | 149809         | 24             |                  | no                        | #5 / #26 & #27        |
| 5   | (LOCATION_DISTRICT.1, DIST_ID)                             | 149809         | 24             |                  | no                        | #4 / #26 & #27        |
| 6   | (INCIDENT_DATE, FIO_DATE)                                  | 149809         | 2140           | Unplaus. dates   | RNP, remove hours         |                       |
| 7   | (SUBJECT_DETAILS, PRIORS)                                  | 129251         | 3              | (UNKNOWN)        | no                        |                       |
| 8   | (SUBJECT_RACE, DESCRIPTION)                                | 149809         | 8              | NO DATA ENTERED  | RP                        |                       |
| 9   | (SUBJECT_DETAILS.1, CLOTHING)                              | 136603         | 102127         | (UNKNOWN)        | Naming                    |                       |
| 10  | (SUBJECT_DETAILS.2, COMPLEXION)                            | 149809         | 10             | NO DATA ENTERED  | RP                        |                       |
| 11  | (UNKNOWN_FIELD_TYPE, FIOFS_TYPE)                           | 149809         | 26             |                  | separate in options       | #17                   |
| 12  | (UNKNOWN_FIELD_TYPE, TERRORISM)                            | 149809         | 2              |                  | no                        |                       |
| 13  | (SEARCH_CONDUCTED, SEARCH)                                 | 20344          | 3              |                  | no                        |                       |
| 14  | (SEARCH_REASON, BASIS)                                     | 34976          | 3              |                  | no                        |                       |
| 15  | (INCIDENT_REASON, STOP_REASONS)                            | 103566         | 6              |                  | no                        |                       |
| 16  | (INCIDENT_REASON.1, FIOFS_REASONS)                         | 149809         | 222            |                  | separate                  |                       |
| 17  | (DISPOSITION, OUTCOME)                                     | 141042         | 7              |                  | separate                  | #11                   |
| 18  | (VEHICLE_MAKE, VEH_MAKE)                                   | 139573         | 47             | (NO DATA ENTERED)| (RP)                      |                       |
| 19  | (VEHICLE_YEAR, VEH_YEAR_NUM)                               | 149628         | 51             | 0, Unplaus. dates| (RP)                      |                       |                        
| 20  | (VEHICLE_COLOR, VEH_COLOR)                                 | 139188         | 16             | (NO DATA ENTERED)| (RP)                      |                       |
| 21  | (VEHICLE_MODEL, VEH_MODEL)                                 | 38354          | 2006           |                  | Naming                    |                       |
| 22  | (VEHICLE_DETAILS, VEH_OCCUPANT)                            | 39360          | 2              |                  |                           |                       |
| 23  | (VEHICLE_DETAILS.1, VEH_STATE)                             | 149809         | 48             | (NO DATA ENTERED)|                           |                       |
| 24  | (OFFICER_SUPERVISOR, SUPERVISOR_ID)                        | 133702         | 219            | (1)              | (RP)                      |                       |
| 25  | (OFFICER_ID, OFFICER_ID)                                   | 149809         | 1793           | (1)              |                           |                       |
| 26  | (OFFICER_ASSIGNMENT, OFF_DIST_ID)                          | 149809         | 26             |                  |                           | #27 / #4 & #5         |
| 27  | (OFFICER_ASSIGNMENT.1, OFF_DIST)                           | 149809         | 26             |                  |                           | #26 / #4 & #5         |
| 28  | (OFFICER_ETHNICITY, ETHNICITY)                             | 23772          | 1101           | non              | RP, Naming                |                       | 
| 29  | (OFFICER_AGE, AGE_AT_FIO_CORRECTED)                        | 149809         | 119            | Unplaus. dates   | RNP                       |                       | 
| 30  | (LOCATION_STREET_NUMBER, STREET_ID)                        | 149809         | 3155           |                  |                           | #3                    |
| 31  | (LOCATION_CITY, CITY)                                      | 149809         | 23             | NO DATA ENTERED  | RP                        |                       |

RNP: Remove not plausible       \
RP: Replace Placeholder         \

### Feature value cleaning

#### Features with no changes
(INCIDENT_UNIQUE_IDENTIFIER, SEQ_NUM)   \
(INCIDENT_UNIQUE_IDENTIFIER.1, FIO_ID)  \


#### Features with cahnges
- (SUBJECT_GENDER, SEX)
    - Replace UNKNWON with NA-value
        - 231 data points are influenced
        - The sex of a subject should be known. It can be assumed that the entry is missing.
- 


#### Need more processing
- (LOCATION_FULL_STREET_ADDRESS_OR_INTERSECTION, LOCATION)
    - can maybe be dropped because of other street information

### Imputing and dropping

MISSING: FIRST CHECK A LIST OF UNIQUE VALUES --> NO DATA, 0 etc. have to be replaced with pd.NA.

needed to be done after feature cleaning: 
The threshold for completed data was set to 30%. Meaning that all data points below 30% completed will be dropped. \
This applies to 0 data points.
According to the histogram, the lowest filling grade lies between 65% and 70%, most of the data have around 85% filling.




# Agenda - Feature analysis
Step:
5. Apply feature encoding
Methods
    - One hot encoding

3. Apply different impute methods for the features with missing values

Impute methods:
- Numerical Features
    - mean, median, mode (most frequent value)
    - Regression, stochastic regression
    - interpolation, extrapolation

- Categorical Features (nominal, ordinal)
    - mode (most frequent value)
    - KNN imputation
    - Probailistic Imputation
    - Hot-Deck Imputation

3.1 Handle outliers
    - Check visually for each feature
    - take 3 times of standard deviation
    - drop lines

4. Apply feature scaling
Methods
    - min-max-scaling
    - standardization (variance scaling)
    - robust scaling



6. Apply feature generation
Methods
- 

7. Apply feature selection / dimensionality reduction

Methods
    - Principal Component Analysis (PCA) (DR) - only numerical features, not easily understandable feature space
    - Multi-Dimensional Scaling (MDS) (DR) - for both types, easier, but still can be difficult to understand
    - Local Linear Embedding (LLE) (DR)
    - t-Dsitributed Stochastic Neighbor Embedding (t-SNE)
    - feature ranking
    - ANOVA
    - Chi-Square test
    - Mutual Information
    - Permutation feature importance
    - minimum/maximum accuracy
    - Local Interpretable Model-agnostic explainations (LIME)
    - Shapely Additive Explainations values (SHAP)
    - Feature variance (low variance can be dropped - does not contain much information)ä
    - Correlation matrix
    - Exclusive Features Selection (EFS)
    - Sequential Forward Feature Selection (SFS)
    - Sequential Backward Feature Selection (SBS)
    - Recursive feature elimination (RFE)

    